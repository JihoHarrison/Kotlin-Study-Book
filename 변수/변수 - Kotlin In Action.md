## 변수

공부 자료 : Kotlin In Action 2장 - 코틀린 기초

<br></br>

### 01 - 코틀린의 변수 선언(초기화 식 사용 O)

- 변수 선언 시 `등호(=)`를 사용해서 변수의 값을 초기화하며 선언하는 방법이다.
- 변수 이름 뒤에 `:`을 붙이고, 변수의 타입을 명시한다.
- 변수 타입을 생략해도 된다.
- = 컴파일러가 `초기화 식`의 타입을 분석해서 변수의 타입으로 추론하기 때문이다.
~~~kotlin
val name: String = "jihoKevin" // 타입 명시

// 또는 

val name = "jihoKevin" // 타입 생략
~~~
- 위 코드 설명
  - 초기화 식은 "jihoKevin" 부분이다.
  - "jihoKevin"의 타입이 `String`이므로 변수 name의 타입도 String이라 추론한다.

<br></br>

### 02 - 코틀린의 변수 선언(초기화 식 사용 X)

- 변수 선언만 하고 초기화는 이후에 하는 방법이다.
- 등호와 초기화 식을 작성하지 않는다.
- 초기화 식을 사용하지 않고 변수 선언을 하려면 변수 타입을 반드시 명시해야 한다.
- = 초기화 식이 없기 때문에 컴파일러가 변수 타입을 추론할 수 없기 때문이다.
~~~kotlin
val name: String // 반드시 타입 명시

...

name = "jihoKevin"
~~~

<br></br>

### 03 - val 키워드

- 코틀린 변수 선언 시 사용하는 키워드는 `val` 과 `var`이다.
- `val` = 영어 `value(=값)`에서 따온 키워드
- `val` = 변수 선언 이후, 해당 변수의 값을 변경할 수 없다.
  - `immutable` = 변경 불가능한
- `val` 키워드로 선언된 변수는 초기화하고 나면 재대입이 불가능하다.
- = 자바의 `final` 키워드로 선언된 변수에 해당된다.
- val 키워드로 선언된 변수는 정확히 `한 번만 초기화`되어야 한다.
- 단, 어떤 블록이 실행될 때 오직 한 번의 초기화만 일어남을 컴파일러가 확인할 수 있다면 조건에 따라 다른 여러 값으로 초기화 할 수 있다.
~~~kotlin
val message: String 

if (isRed()) {
    message = "yes, this is red!"
} else {
    message = "no, this is not red!"
}
~~~
- 위 코드 설명
  - message 값은 if문 조건에 따라 서로 다른 값으로 초기화 되어 있다.
  - 하지만 message는 결국 딱 한 번만 초기화 된다.
- val 키워드로 선언된 변수가 `참조 변수`라면 그 참조가 가리키는 객체의 내부 값은 변경될 수 있다.
~~~kotlin
val languages = arrayListOf("Kotlin") // 불변 참조 변수 선언
languages.add("Java") // 가능, 불변 참조 변수가 가리키는 객체 내부를 변경하는 것이기 때문
~~~
- 위 코드 설명
  - 참조 변수에 대해서 알고 있어야 한다.
  - `arrayListOf()` = ArrayList 클래스의 객체를 생성하는 함수이다.
  - 즉, 변경 불가능한 변수에 객체를 초기화 한 것이다.
  - 객체 자체의 내부 값은 변경될 수 있다.
  - = "Java"를 `add()`로 추가할 수 있다.

![image](https://user-images.githubusercontent.com/31889335/140078453-71cd2fee-dd9b-4c82-8437-45002ac66d1e.png)

- 위 그림 설명
  - "Java"를 추가해서 객체 자체의 내부 값을 변경해도,
  - 변수 languages의 값인 42293은 변경되지 않으므로 가능하다.


<br></br>

### 04 - var 키워드

- `var` = 영어 `variable(=명사로 '변수', 형용사로 '변할 수 있는')`에서 따온 키워드
- `var` = 변수 선언 이후에도 해당 변수의 값을 변경할 수 있다.
  - `mutable` = 변경 가능한
- `var` 키워드로 선언된 변수의 값은 바뀔 수 있다.
- var 키워드로 선언된 변수는 이후에도 값을 변경할 수 있지만, 변수의 타입이 달라지는 값으로는 변경할 수 없다.
~~~kotlin
var name: String = "jihoKevin" // 변수의 타입이 String 타입이다.

...

name = 10000 // 불가능, 초기화 식의 타입이 Int이기 때문이다.
~~~
- 어떤 타입의 변수에 다른 타입의 값을 저장하고 싶다면 변환 함수(예시 - `toString()` 등)를 써서 값을 변수의 타입으로 변환해야 한다.
- 또는 값을 변수에 대입할 수 있는 타입으로 `강제 형 변환` 해야 한다.

<br></br>

### 05 - 코틀린 변수 선언 꿀팁

- 기본적으로 모든 변수를 `val` 키워드를 사용해 불변 변수로 선언하고, 나중에 해당 변수의 값을 변경해야 할 때 `var`로 키워드를 변경하면 된다.
- `변경 불가능한 참조`와 `변경 불가능한 객체`를 `부수 효과가 없는 함수`와 조합해 사용하면 코드가 함수형 코드에 가까워진다.

<br></br>